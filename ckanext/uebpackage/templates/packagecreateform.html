{% extends "page.html" %}
{% import 'macros/form.html' as form %}
{{ form.errors(error_summary, type="warning") }}
{% set data = data or {} %}
{% set errors = errors or {} %}
{% set stages = stages or {} %}
{% set action = form_action or h.url_for(controller ='ckanext.uebpackage.controllers.packagecreate:PackagecreateController', action ='submit') %}

{% block subtitle %}{{ _('UEB Package Create Request') }}{% endblock %}

{% block breadcrumb_content %}
  <li class="active">{% link_for _('Create UEB Model Package'), controller='ckanext.uebpackage.controllers.packagecreate:PackagecreateController', action='packagecreateform' %}</li>
{% endblock %}


{%- block scripts %}
  {{ super() }}
  {% resource 'uebresources/css/main.css' %}   
  {% resource 'uebresources/scripts/package_create.js' %}  
{% endblock -%}

{% block secondary_content %}
	{% block info_module %}
		<section class="module module-narrow module-shallow">
			{% if c.form_stage != 'stage_confirm' %}
				{% set sidebar_heading = c.form_stage.replace('stage_', 'Step-') %}
			{% endif %}
			{% if c.form_stage == 'stage_confirm' %}
				{% set sidebar_heading = _('Confirm your settings') %}
			{% endif %}
			<h2 class="module-heading"><i class="icon-info-sign"></i> {{ _(sidebar_heading) }}</h2>
			{% if c.form_stage == 'stage_1' %}				
				{% set sidebar_info = _('Domain setup is required. All other steps are optional.') %}
			{% endif %}
		    
		    {% if c.form_stage != 'stage_1' and c.form_stage != 'stage_confirm' %}
				{% set sidebar_info = _('This step is optional unless you want to edit the default settings.') %}
			{% endif %}
			
			{% if c.form_stage == 'stage_confirm' %}
				{% set sidebar_info = _('Review your inputs and if you need to change any configurations, click the Edit button for a specific section. If you are ready to submit your request, select the Confirm button.') %}
			{% endif %}
			<div class="module-content">
		    	<p>{{ sidebar_info }}</p>
		    </div>
	    </section>
    {% endblock %}
{% endblock %}
                  
{% block primary_content %}
  <section class="module offset1" width=730px>
    <div class="module-content">		
		{% block error_summary %}
    		{{ form.errors(error_summary) }}
  		{% endblock %}
  		{# using the html5 attribute 'data-module' to include the package_create.js file #}
  		<form name="ueb_pkg_request" method="get" action="{{ action }}" data-module="package_create" >
	    	<input type="hidden" name="form_stage" value="{{ c.form_stage }}" />	  
	    	{% if c.form_stage != 'stage_confirm' %}
		    	{% block stages %}
		    		{% snippet 'packagecreate_stages.html', stages =stages %}	    		
				{% endblock %}  
			{% endif %}
			
			{# Set Package #} 	
	    	{% if c.form_stage == 'stage_1' %}		    	
		    	{% block ueb_pkg_create_note %}
		    		<span class="info-block info-block-small">
	      				<i class="icon-info-sign"></i>
	      				{{ _('Your request for creating a UEB model package will be put into a queue.') }}
	    			</span>
		    	{% endblock %}
		    	{% block ueb_pkg_setup_heading %}
		    		<h4>{{ _('Step-1:Set Domain') }}</h4>
		    	{% endblock %}
		    	{% block form_field_pkgname %}
		    		{{ form.input('pkgname', label = _('Package name'), type='text', value=data.pkgname,
		    		id='field-pkgname', placeholder= _('Enter package name'), error=errors.pkgname,
		    		classes=['control-medium'])}}
		    	{% endblock %}
		    	
		    	{% block form_field_pkgdescription %}
		    		{{ form.textarea('pkgdescription', label = _('Description'), value=data.pkgdescription,
		    		id='field-pkgdescription', placeholder= _(''), error=errors.pkgdescription,
		    		classes=['control-medium'])}}
		    	{% endblock %}
		    	
		    	{% block form_set_model_domain %}
		    		<fieldset>
		    			<legend>Set Model Domain</legend>   
	    				{% block form_fields_setdomainfile %}	    					
	    					<label >Select domain file type</label>		    					
				    		{% if data.domainfiletypeoption == 'polygon' or not data.domainfiletypeoption  %}	
				    			<input type="radio" name="domainfiletypeoption" id="radDomainPolygonFileType" value="polygon" checked  />
				    		{% else %}
				    			<input type="radio" name="domainfiletypeoption" id="radDomainPolygonFileType" value="polygon" /> 
				    		{% endif %}				    						    		
				    		<span class="ueb-radio inline">Polygon shape file</span>
				    		<br /> 
				    		{% if data.domainfiletypeoption == '2DNetCDF'  %} 			    		 
								<input type="radio" name="domainfiletypeoption" id="radDomainNetCDFFileType" value="2DNetCDF" checked />
							{% else %}
								<input type="radio" name="domainfiletypeoption" id="radDomainNetCDFFileType" value="2DNetCDF"  />
							{% endif %}							
							<span class="ueb-radio inline">2D NetCDF file</span>
							<br />																		
				    	{% endblock %}
				    	<p>				    					    	
				    	{% block form_field_select_domain_shape_file %}				    		  	
				    		<div id="domainShapeFileSelection">		    		
				    			{% if c.ueb_domain_shape_files %}
				    			<select id="field-shapefile" name="domainshapefile" data-module="autocomplete">
				    				{#<option value="" {% if not data.domainshapefile %} selected="selected" {% endif %}>{{ _('Select a shape file...') }}</option>#}
				    				{% for file in c.ueb_domain_shape_files %}
				    					<option value="{{ file.id }}" {% if data.domainshapefile == file.id %} selected="selected" {% endif %}>{{ file.name }}</option>
				    				{% endfor %}
				    			</select>
				    			{% endif %}
				    			{#
				    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
				    				{% call form.input('domainshapefile', id='field-domainshapefile', label=_('Select a shape file'), placeholder=_(''), value=data.domainshapefile, error=errors.domainshapefile, classes=['control-medium'], attrs=format_attrs) %}
					    				
				    				{% endcall %}
				    			#}
				    		</div>					    	
			    		{% endblock %}			    			
			    		{% block form_field_select_domain_netcdf_file %}
			    			<div id="domainNetCDFFileSelection">
				    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
				    				{% call form.input('domainnetcdfile', id='field-domainnetcdfile', label=_('Select a 2D NetCDF file'), placeholder=_(''), value=data.domainnetcdfile, error=errors.domainnetcdfile, classes=['control-medium'], attrs=format_attrs) %}
					    				
				    				{% endcall %}
				    			
				    			{{ form.input('domainnetcdffileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.domainnetcdffileformat,
				    			id='field-domainnetcdffileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.domainnetcdffileformat,
				    			classes=['control-medium'])}}					    		
				    		</div>
				    		
			    		{% endblock %}
			    		</p>
			    		{% block form_field_buffer_size %}
				    		{{ form.input('buffersize', label = _('Watershed buffer size(m)'), type='text', value=data.buffersize,
				    		id='field-buffersize', placeholder= _('500'), error=errors.buffersize,
				    		classes=['control-medium'])}}
				    	{% endblock %}
				    	
				    	{% block form_field_grid_cell_size %}
				    		{{ form.input('gridcellsize', label = _('Domain grid cell size(m)'), type='text', value=data.gridcellsize,
				    		id='field-gridcellsize', placeholder= _('100'), error=errors.gridcellsize,
				    		classes=['control-medium'])}}
				    	{% endblock %}
		    		</fieldset>
		    	{% endblock %}
		    	
		    	{% block form_fields_set_simulation_time %}
		    		<fieldset>
		    			<legend>Set Simulation Time</legend>
		    			{% block form_field_sim_start_date %}
		    				{{ form.input('startdate', label = _('Simulation start date'), type='text', value=data.startdate,
				    		id='field-startdate', placeholder= _('01/01/2011'), error=errors.startdate,
				    		classes=['control-medium'])}}
				    	{% endblock %}
		    	
				    	{% block form_field_sim_end_date %}
				    		{{ form.input('enddate', label = _('Simulation end date'), type='text', value=data.enddate,
				    		id='field-enddate', placeholder= _('12/31/2011'), error=errors.enddate,
				    		classes=['control-medium'])}}
				    	{% endblock %}
		    	
				    	{% block form_field_sim_time_step %}
				    		{{ form.select('timestep', label=_('Time step (hr)'), options=[{'value':1}, {'value':2}, {'value':3}, {'value':4}, {'value':6}], selected=6, error=errors.timestep, classes=['control-medium'])}}
				    	{% endblock %}   
		    		</fieldset>		
		    	{% endblock %}	        
	        {% endif %}
	        
	        {# Model Parameters #}
	        {% if c.form_stage == 'stage_2' %}
	        	{% block ueb_pkg_model_parameters_heading %}
		    		<h4>{{ _('Step-2:Model Parameters') }}</h4>
		    	{% endblock %}
	        	{% block form_fields_set_model_params_file %}
					<label >Use Default Parameters File</label>
					{% if data.parametersfileoption == 'Yes' or not data.defaultparametersfile  %} 
		    			<input type="radio" name="parametersfileoption" id='radParametersFileOptionYes' value="Yes" checked >
		    		{% else %}
		    			<input type="radio" name="parametersfileoption" id="radParametersFileOptionYes" value="Yes" >
		    		{% endif %}
		    		<span class="ueb-radio inline">Yes</span>
		    		<br /> 
		    		{% if data.parametersfileoption == 'No' %} 
						<input type="radio" name="parametersfileoption" id="radParametersFileOptionNo" value="No" checked >
					{% else %}
						<input type="radio" name="parametersfileoption" id="radParametersFileOptionNo" value="No" >
					{% endif %}
					<span class="ueb-radio inline">No</span> 
					<br />
					<div id="parametersFileSelection">
						{% block form_field_select_parameters_file %}
                            {% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
                                {% call form.input('parametersfile', id='field-parametersfile', label=_('Select a parameters file'), placeholder=_(''), value=data.parametersfile, error=errors.parametersfile, classes=['control-medium'], attrs=format_attrs) %}

                                {% endcall %}
		    			{% endblock %}
	    			</div>
				{% endblock %}			    	
	        	
	        {% endif %}
	        
	        {# Site Initial Conditions: State Variables#}
	        {% if c.form_stage == 'stage_3' %}
	        	{% block ueb_pkg_site_initial_conditions_state_variables_heading %}
		    		<h4>{{ _('Step-3:Site Initial Conditions-State Variables') }}</h4>
		    	{% endblock %}
	        	{% block form_fields_set_energy_content_options %}
					<label >Energy content options</label>
					{% if data.usicoption == 'Constant' or not data.usicoption %} 
		    			<input type="radio" name="usicoption" id="radUSICConstantOption" value="Constant" checked >
					{% else %}
						<input type="radio" name="usicoption" id="radUSICConstantOption" value="Constant" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use constant value') }}</span> 
					<br />
					{% if data.usicoption == 'Grid' %} 
						<input type="radio" name="usicoption" id="radUSICGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="usicoption" id="radUSICGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_usic %}
						<div id="usic_constant">
				    		{{ form.input('usic', label = _('Energy content value (kJ/m2)'), type='text', value=data.usic,
				    		id='field-usic', placeholder= _('0'), error=errors.usic,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    
				    <div id="usic_gridfile">	
						{% block form_field_select_usic_grid_file %}											    		
			    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
			    				{% call form.input('usicgridfile', id='field-usicgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.usicgridfile, error=errors.usicgridfile, classes=['control-medium'], attrs=format_attrs) %}
				    				
			    				{% endcall %}
			    			
		    			{% endblock %}
		    			
		    			{% block form_field_usic_usic_grid_file_format %}
				    		{{ form.input('usicgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.usicgridfileformat,
				    		id='field-usicgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.usicgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
					{% endblock %}	
	        	</div>
	        	
	        	{% block form_fields_set_snow_water_equivalent_options %}
					<label >Snow water equivalent options</label>
					{% if data.wsisoption == 'Constant' or not data.wsisoption %} 
		    			<input type="radio" name="wsisoption" id= "radWSISConstantOption" value="Constant" checked > 
					{% else %}
						<input type="radio" name="wsisoption" id= "radWSISConstantOption" value="Constant" > 					
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use contant value') }}</span> 
					<br />
					{% if data.wsisoption == 'Grid' %} 
						<input type="radio" name="wsisoption" id= "radWSISGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="wsisoption" id= "radWSISGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_wsis %}
						<div id="wsis_constant">
				    		{{ form.input('wsis', label = _('Snow water equivalent value (m)'), type='text', value=data.wsis,
				    		id='field-wsis', placeholder= _('0'), error=errors.wsis,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="wsis_gridfile">
						{% block form_field_select_wsis_grid_file %}				    		
			    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
			    				{% call form.input('wsisgridfile', id='field-wsisgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.wsisgridfile, error=errors.wsisgridfile, classes=['control-medium'], attrs=format_attrs) %}
				    				
			    				{% endcall %}
			    		{% endblock %}
		    			{% block form_field_wsis_grid_file_format %}
				    		{{ form.input('wsisgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.wsisgridfileformat,
				    		id='field-wsisgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.wsisgridfileformat,
				    		classes=['control-medium'])}}
				    	{% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_snow_surface_age_options %}
					<label >Snow surface dimensionless age options</label>
					{% if data.ticoption == 'Constant' or not data.ticoption %} 
		    			<input type="radio" name="ticoption" id="radTICConstantOption" value="Constant" checked > 
					{% else %}
						<input type="radio" name="ticoption" id="radTICConstantOption" value="Constant" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.ticoption == 'Grid' %} 
						<input type="radio" name="ticoption" id="radTICGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="ticoption" id="radTICGridOption"  value="Grid"> 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_tic %}
						<div id="tic_constant">
				    		{{ form.input('tic', label = _('Snow surface dimensionless age value'), type='text', value=data.tic,
				    		id='field-tic', placeholder= _('0'), error=errors.tic,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="tic_gridfile">
						{% block form_field_select_tic_grid_file %}				    		
			    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
			    				{% call form.input('ticgridfile', id='field-ticgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.ticgridfile, error=errors.ticgridfile, classes=['control-medium'], attrs=format_attrs) %}
				    				
			    				{% endcall %}
			    		{% endblock %}
		    			{% block form_field_tic_grid_file_format %}
				    		{{ form.input('ticgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.ticgridfileformat,
				    		id='field-ticgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.ticgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
					</div>
				{% endblock %}	
					
				{% block form_fields_set_canopy_snow_water_options %}
					<label >Canopy snow water equivalent options</label>
					{% if data.wcicoption == 'Constant' or not data.wcicoption %} 
		    			<input type="radio" name="wcicoption" id= "radWCICConstantOption" value="Constant" checked > 
		    		{% else %}
		    			<input type="radio" name="wcicoption" id= "radWCICConstantOption" value="Constant" > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
		    		<br />
		    		{% if data.wcicoption == 'Grid' %}
						<input type="radio" name="wcicoption" id= "radWCICGridOption"  value="Grid" checked > 
					{% else %}
						<input type="radio" name="wcicoption" id= "radWCICGridOption"  value="Grid"> 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_wcic %}
						<div id="wcic_constant">
				    		{{ form.input('wcic', label = _('Canopy snow water equivalent value (m)'), type='text', value=data.wcic,
				    		id='field-wcic', placeholder= _('0'), error=errors.wcic,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="wcic_gridfile">
						{% block form_field_select_wcic_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('wcicgridfile', id='field-wcisgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.wcicgridfile, error=errors.wcicgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_wcic_grid_file_format %}
				    		{{ form.input('wcicgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.wcicgridfileformat,
				    		id='field-wcicgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.wcicgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
	        {% endif %}
	        
	        {# Site Initial Conditions: Snow Variables#}
	        {% if c.form_stage == 'stage_4' %}
	        	{% block ueb_pkg_site_initial_conditions_snow_variables_heading %}
		    		<h4>{{ _('Step-4:Site Initial Conditions-Snow Variables') }}</h4>
		    	{% endblock %}
	        	{% block form_fields_set_drift_factor_options %}
					<label >Drift factor options</label>
					{% if data.dfoption == 'Constant' or not data.dfoption %} 
		    			<input type="radio" name="dfoption" id="radDFConstantOption" value="Constant" checked > 
					{% else %}
						<input type="radio" name="dfoption" id="radDFConstantOption" value="Constant" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.dfoption == 'Grid' %} 
						<input type="radio" name="dfoption" id="radDFGridOption" value="Grid" checked> 
					{% else %}
						<input type="radio" name="dfoption" id="radDFGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_df %}
						<div id="df_constant">
				    		{{ form.input('df', label = _('Drift factor value'), type='text', value=data.df,
				    		id='field-df', placeholder= _('0'), error=errors.df,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="df_gridfile">
						{% block form_field_select_df_grid_file %}				    		
			    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
			    				{% call form.input('dfgridfile', id='field-dfgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.dfgridfile, error=errors.dfgridfile, classes=['control-medium'], attrs=format_attrs) %}
				    				
			    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_df_grid_file_format %}
				    		{{ form.input('dfgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.dfgridfileformat,
				    		id='field-dfgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.dfgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_albedo_extinction_options %}
					<label >Albedo extinction coefficient options</label>
					{% if data.aepoption == 'Constant' or not data.aepoption %} 
		    			<input type="radio" name="aepoption" id="radAepConstantOption" value="Constant" checked >
		    		{% else %}
		    			<input type="radio" name="aepoption" id="radAepConstantOption" value="Constant" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
		    		<br />
		    		{% if data.aepoption == 'Grid' %} 
						<input type="radio" name="aepoption" id="radAepGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="aepoption" id="radAepGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_aep %}
						<div id="aep_constant">
				    		{{ form.input('aep', label = _('Albedo extinction coefficient value(m)'), type='text', value=data.aep,
				    		id='field-aep', placeholder= _('0.1'), error=errors.aep,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="aep_gridfile">
						{% block form_field_select_aep_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('aepgridfile', id='field-aepgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.aepgridfile, error=errors.aepgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_aep_grid_file_format %}
				    		{{ form.input('aepgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.aepgridfileformat,
				    		id='field-aepgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.aepgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_snow_load_per_unit_branch_area_options %}
					<label >Maximum snow load held per unit branch area options </label>
					{% if data.sbaroption == 'Constant' or not data.sbaroption %} 
		    			<input type="radio" name="sbaroption" id="radSbarConstantOption" value="Constant" checked > 
		    		{% else %}
		    			<input type="radio" name="sbaroption" id="radSbarConstantOption" value="Constant" > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
		    		<br />
		    		{% if data.sbaroption == 'Grid' %}
						<input type="radio" name="sbaroption" id="radSbarGridOption"  value="Grid" checked > 
					{% else %}
						<input type="radio" name="sbaroption" id="radSbarGridOption"  value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_sbar %}
						<div id="sbar_constant">
				    		{{ form.input('sbar', label = _('Maximum snow load held per unit branch area value(kJ/m2)'), type='text', value=data.sbar,
				    		id='field-sbar', placeholder= _('6.6'), error=errors.sbar,
				    		classes=['control-medium'])}}
				    	</div>
					{% endblock %} 
					<div id="sbar_gridfile">    
						{% block form_field_select_sbar_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('sbargridfile', id='field-sbargridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.sbargridfile, error=errors.sbargridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_sbar_grid_file_format %}
				    		{{ form.input('sbargridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.sbargridfileformat,
				    		id='field-sbargridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.sbargridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_albedo_beneath_snow_options %}
					<label >Albedo of the substrate beneath the snow options  </label>
					{% if data.subalboption == 'Constant' or not data.subalboption %} 
		    			<input type="radio" name="subalboption" id="radSubalbConstantOption" value="Constant" checked > 
		    		{% else %}
		    			<input type="radio" name="subalboption" id="radSubalbConstantOption" value="Constant" > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
		    		<br />
		    		{% if data.subalboption == 'Grid' %} 
						<input type="radio" name="subalboption" id="radSubalbGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="subalboption" id="radSubalbGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_subalb %}
						<div id="subalb_constant">
				    		{{ form.input('subalb', label = _('Albedo of the substrate beneath the snow value'), type='text', value=data.subalb,
				    		id='field-subalb', placeholder= _('0.25'), error=errors.subalb,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="subalb_gridfile">
						{% block form_field_select_subalb_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('subalbgridfile', id='field-subalbgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.subalbgridfile, error=errors.subalbgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_subalb_grid_file_format %}
				    		{{ form.input('subalbgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.subalbgridfileformat,
				    		id='field-subalbgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.subalbgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_type_snow_substrate_options %}
					<label >Type of beneath snow substrate encoded options   </label>
					{% if data.subtypeoption == 'Constant' or not data.subtypeoption %} 
		    			<input type="radio" name="subtypeoption" id="radSubtypeConstantOption" value="Constant" checked > 
		    		{% else %}
		    			<input type="radio" name="subtypeoption" id="radSubtypeConstantOption" value="Constant" > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
		    		<br />
		    		{% if data.subtypeoption == 'Grid' %}
						<input type="radio" name="subtypeoption" id="radSubtypeGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="subtypeoption" id="radSubtypeGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_subtype %}
						<div id="subtype_constant">
				    		{% call form.input('subtype', label = _('Type of beneath snow substrate encoded value'), type='text', value=data.subtype,
				    		id='field-subtype', placeholder= _('0'), error=errors.subtype,
				    		classes=['control-medium']) %}
				    		{{ form.info(_('0 = Ground/Non Glacier, 1=Clean Ice/glacier, 2= Debris covered ice/glacier, 3= Glacier snow accumulation zone')) }}
				    		{% endcall %}
			    		</div>
				    {% endblock %} 
					<div id="subtype_gridfile">
						{% block form_field_select_subtype_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('subtypegridfile', id='field-subtypegridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.subtypegridfile, error=errors.subtypegridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_subtype_grid_file_format %}
				    		{{ form.input('subtypegridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.subtypegridfileformat,
				    		id='field-subtypegridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.subtypegridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_surface_runs_off_options %}
					<label >Fraction of surface melt that runs off and does not enter snow options   </label>
					{% if data.gsurfoption == 'Constant' or not data.gsurfoption %} 
		    			<input type="radio" name="gsurfoption" id="radGsurfConstantOption" value="Constant" checked > 
		    		{% else %}
		    			<input type="radio" name="gsurfoption" id="radGsurfConstantOption" value="Constant" > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
		    		<br />
		    		{% if data.gsurfoption == 'Grid' %} 
						<input type="radio" name="gsurfoption" id="radGsurfGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="gsurfoption" id="radGsurfGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_gsurf %}
						<div id="gsurf_constant">
				    		{{ form.input('gsurf', label = _('Fraction of surface melt that runs off value'), type='text', value=data.gsurf,
				    		id='field-gsurf', placeholder= _('0'), error=errors.gsurf,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %}
				    <div id="gsurf_gridfile"> 
						{% block form_field_select_gsurf_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('gsurfgridfile', id='field-gsurfgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.gsurfgridfile, error=errors.gsurfgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_gsurf_grid_file_format %}
				    		{{ form.input('gsurfgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.gsurfgridfileformat,
				    		id='field-gsurfgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.gsurfgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_snow_surface_temperature_options %}
					<label > {{ _('Snow surface temperature one day prior to the model starting time options') }} </label>
					{% if data.ts_lastoption == 'Constant' or not data.ts_lastoption %} 
		    			<input type="radio" name="ts_lastoption" id="radTslastConstantOption" value="Constant" checked > 
		    		{% else %}
		    			<input type="radio" name="ts_lastoption" id="radTslastConstantOption" value="Constant" > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use a constnat value') }}</span> 
		    		<br />
		    		{% if data.ts_lastoption == 'Grid' %} 
						<input type="radio" name="ts_lastoption" id="radTslastGridOption" value="Grid" checked >						
					{% else %}
						<input type="radio" name="ts_lastoption" id="radTslastGridOption" value="Grid" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_tslast %}
						<div id="tslast_constant">
				    		{% call form.input('ts_last', label = _('Snow surface temperature one day prior to the model starting time value'), type='text', value=data.ts_last,
				    		id='field-ts_last', placeholder= _('-9999'), error=errors.ts_last,
				    		classes=['control-medium']) %}
				    		{{ form.info(_('For missing value enter -9999')) }}			    		
				    		{% endcall %}
			    		</div>
				    {% endblock %} 
				    <div id="tslast_gridfile">
						{% block form_field_select_tslast_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('ts_lastgridfile', id='field-ts_lastgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.ts_lastgridfile, error=errors.ts_lastgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_tslast_grid_file_format %}
				    		{{ form.input('ts_lastgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.ts_lastgridfileformat,
				    		id='field-ts_lastgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.ts_lastgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
			{% endif %}
			
			{# Site Initial Conditions: Land Cover Variables#}
	        {% if c.form_stage == 'stage_5' %}
	        	{% block ueb_pkg_site_initial_conditions_landcover_variables_heading %}
		    		<h4>{{ _('Step-5:Site Initial Conditions-Land Cover Variables') }}</h4>
		    	{% endblock %}
	        	{% block form_fields_set_canopy_coverage_options %}
					<label > {{ _('Canopy coverage options') }} </label>
					{% if data.ccoption == 'NLCD' or not data.ccoption %} 
		    			<input type="radio" name="ccoption" id="radCCNLCDOption" value="NLCD" checked > 
					{% else %}
						<input type="radio" name="ccoption" id="radCCNLCDOption" value="NLCD" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Derive from NLCD') }}</span> 
					<br />
					{% if data.ccoption == 'Constant' %} 
						<input type="radio" name="ccoption" id="radCCConstantOption"value="Constant" checked > 
					{% else %}
						<input type="radio" name="ccoption" id="radCCConstantOption"value="Constant" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.ccoption == 'Grid' %} 
						<input type="radio" name="ccoption" id="radCCGridOption" value="Grid" checked >
					{% else %}
						<input type="radio" name="ccoption" id="radCCGridOption" value="Grid" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_cc %}
						<div id="cc_constant">
				    		{{ form.input('cc', label = _('Canopy coverage value'), type='text', value=data.cc,
				    		id='field-cc', placeholder= _('0'), error=errors.cc,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    
				    <div id="cc_gridfile">
						{% block form_field_select_cc_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('ccgridfile', id='field-ccgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.ccgridfile, error=errors.ccgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_cc_grid_file_format %}
				    		{{ form.input('ccgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.ccgridfileformat,
				    		id='field-ccgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.ccgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_canopy_height_options %}
					<label >Canopy height options</label>
					{% if data.hcanoption == 'NLCD' or not data.hcanoption %} 
		    			<input type="radio" name="hcanoption" id="radHcanNLCDOption" value="NLCD" checked > 
		    		{% else %}
		    			<input type="radio" name="hcanoption" id="radHcanNLCDOption" value="NLCD" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Derive from NLCD') }}</span> 
		    		<br />
		    		{% if data.hcanoption == 'Constant' %} 
						<input type="radio" name="hcanoption" id="radHcanConstantOption" value="Constant" checked > 
					{% else %}
						<input type="radio" name="hcanoption" id="radHcanConstantOption"  value="Constant" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.hcanoption == 'Grid' %} 
						<input type="radio" name="hcanoption" id="radHcanGridOption"  value="Grid" checked > 
					{% else %}
						<input type="radio" name="hcanoption" id="radHcanGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_hcan %}
						<div id="hcan_constant">
				    		{{ form.input('hcan', label = _('Canopy height value'), type='text', value=data.hcan,
				    		id='field-hcan', placeholder= _('0'), error=errors.hcan,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="hcan_gridfile">
						{% block form_field_select_hcan_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('hcangridfile', id='field-hcangridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.hcangridfile, error=errors.hcangridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_hcan_grid_file_format %}
				    		{{ form.input('hcangridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.hcangridfileformat,
				    		id='field-hcangridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.hcangridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_leaf_area_index_options %}
					<label >Leaf area index options</label>
					{% if data.laioption == 'NLCD' or not data.laioption %} 
		    			<input type="radio" name="laioption" id="radLaiNLCDOption" value="NLCD" checked > 
		    		{% else %}
		    			<input type="radio" name="laioption" id="radLaiNLCDOption"  value="NLCD" > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Derive from NLCD') }}</span> 
		    		<br />
		    		{% if data.laioption == 'Constant' %} 
						<input type="radio" name="laioption" id="radLaiConstantOption"  value="Constant" checked > 
					{% else %}
						<input type="radio" name="laioption" id="radLaiConstantOption"  value="Constant" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.laioption == 'Grid' %} 
						<input type="radio" name="laioption" id="radLaiGridOption"  value="Grid" checked > 
					{% else %}
						<input type="radio" name="laioption" id="radLaiGridOption"  value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_lai %}
						<div id="lai_constant">
				    		{{ form.input('lai', label = _('Leaf area index value'), type='text', value=data.lai,
				    		id='field-lai', placeholder= _('0'), error=errors.lai,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="lai_gridfile">
						{% block form_field_select_lai_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('laigridfile', id='field-laigridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.laigridfile, error=errors.laigridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_lai_grid_file_format %}
				    		{{ form.input('laigridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.laigridfileformat,
				    		id='field-laigridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.laigridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				   </div>
				{% endblock %}	
				
				{% block form_fields_set_forest_age_flag_options %}
					<label >Forest age flag options</label>
					{% if data.ycageoption == 'NLCD' or not data.ycageoption %} 
		    			<input type="radio" name="ycageoption" id="radYcageNLCDOption"  value="NLCD" checked > 
		    		{% else %}
		    			<input type="radio" name="ycageoption" id="radYcageNLCDOption" value="NLCD"  > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Derive from NLCD') }}</span> 
		    		<br />
		    		{% if data.ycageoption == 'Constant' %} 
						<input type="radio" name="ycageoption" id="radYcageConstantOption" value="Constant" checked > 
					{% else %}
						<input type="radio" name="ycageoption" id="radYcageConstantOption" value="Constant"> 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.ycageoption == 'Grid' %} 
						<input type="radio" name="ycageoption" id="radYcageGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="ycageoption" id="radYcageGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_ycage %}
						<div id="ycage_constant">
				    		{{ form.input('ycage', label = _('Forest age flag value'), type='text', value=data.ycage,
				    		id='field-ycage', placeholder= _('0'), error=errors.ycage,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="ycage_gridfile">
						{% block form_field_select_ycage_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('ycagegridfile', id='field-ycagegridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.yacgegridfile, error=errors.ycagegridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_ycage_grid_file_format %}
				    		{{ form.input('ycagegridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.ycagegridfileformat,
				    		id='field-ycagegridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.ycagegridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
			{% endif %}
			
			{# Site Initial Conditions: Geographic Variables#}
	        {% if c.form_stage == 'stage_6' %}
	        	{% block ueb_pkg_site_initial_conditions_geographic_variables_heading %}
		    		<h4>{{ _('Step-6:Site Initial Conditions-Geographic Variables') }}</h4>
		    	{% endblock %}
	        	{% block form_fields_set_avg_atmospheric_pressure_options %}
					<label >Average atmospheric pressure options</label>
					{% if data.aproption == 'Compute' or not data.aproption %} 
		    			<input type="radio" name="aproption" id="radAprComputeOption" value="Compute" checked > 
		    		{% else %}
		    			<input type="radio" name="aproption" id="radAprComputeOption" value="Compute" > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Derive from elevation data') }}</span> 
		    		<br />
		    		{% if data.aproption == 'Constant' %} 
						<input type="radio" name="aproption" id="radAprConstantOption" value="Constant" checked > 
					{% else %}
						<input type="radio" name="aproption" id="radAprConstantOption" value="Constant" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.aproption == 'Grid' %} 
						<input type="radio" name="aproption"  id= "radAprGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="aproption"  id= "radAprGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_apr %}
						<div id="apr_constant">
				    		{{ form.input('apr', label = _('Average atmospheric pressure value'), type='text', value=data.apr,
				    		id='field-apr', placeholder= _('0'), error=errors.apr,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="apr_gridfile">
						{% block form_field_select_apr_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('aprgridfile', id='field-aprgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.aprgridfile, error=errors.aprgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_apr_grid_file_format %}
				    		{{ form.input('aprgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.aprgridfileformat,
				    		id='field-aprgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.aprgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
					{% endblock %}
				
				{% block form_fields_set_site_slope_options %}
					<label >Site slope options</label>
					{% if data.slopeoption == 'Compute' or not data.slopeoption %} 
		    			<input type="radio" name="slopeoption" id="radSlopeComputeOption" value="Compute" checked >
		    		{% else %}
		    			<input type="radio" name="slopeoption" id="radSlopeComputeOption" value="Compute" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Derive from elevation data') }}</span>
					<br /> 
					{% if data.slopeoption == 'Constant' %} 
						<input type="radio" name="slopeoption" id="radSlopeConstantOption" value="Constant" checked > 
					{% else %}
						<input type="radio" name="slopeoption" id="radSlopeConstantOption" value="Constant" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.slopeoption == 'Grid' %} 
						<input type="radio" name="slopeoption" id="radSlopeGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="slopeoption" id="radSlopeGridOption" value="Grid"> 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_slope %}
						<div id="slope_constant">
				    		{{ form.input('slope', label = _('Site slope value'), type='text', value=data.slope,
				    		id='field-slope', placeholder= _('0'), error=errors.slope,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    <div id="slope_gridfile">
						{% block form_field_select_slope_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('slopegridfile', id='field-slopegridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.slopegridfile, error=errors.slopegridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_slope_grid_file_format %}
				    		{{ form.input('slopegridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.aprgridfileformat,
				    		id='field-slopegridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.slopegridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_site_aspect_options %}
					<label >Site aspect options</label>
					{% if data.aspectoption == 'Compute' or not data.aspectoption %} 
		    			<input type="radio" name="aspectoption" id="radAspectComputeOption" value="Compute" checked >		    			
		    		{% else %}
		    			<input type="radio" name="aspectoption" id="radAspectComputeOption" value="Compute"  > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Derive from elevation data') }}</span> 
		    		<br />
		    		{% if data.aspectoption == 'Constant' %} 
						<input type="radio" name="aspectoption" id="radAspectConstantOption" value="Constant" checked > 
					{% else %}
						<input type="radio" name="aspectoption" id="radAspectConstantOption" value="Constant" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.aspectoption == 'Grid' %} 
						<input type="radio" name="aspectoption" id="radAspectGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="aspectoption" id="radAspectGridOption" value="Grid" > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_aspect %}
						<div id="aspect_constant">
				    		{{ form.input('aspect', label = _('Site aspect value'), type='text', value=data.aspect,
				    		id='field-aspect', placeholder= _('0'), error=errors.aspect,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %}
				    <div id="aspect_gridfile"> 
						{% block form_field_select_aspect_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('aspectgridfile', id='field-aspectgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.aspectgridfile, error=errors.aspectgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_aspect_grid_file_format %}
				    		{{ form.input('aspectgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.aspectgridfileformat,
				    		id='field-aspectgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.aspectgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_site_latitude_options %}
					<label >Site latitude options</label>
					{% if data.latoption == 'Compute' or not data.latoption %} 
		    			<input type="radio" name="latitudeoption" id="radLatComputeOption" value="Compute" checked >
		    		{% else %}
		    			<input type="radio" name="latitudeoption" id="radLatComputeOption" value="Compute" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Derive from projection information') }}</span> 
		    		<br />
		    		{% if data.latoption == 'Constant' %} 
						<input type="radio" name="latitudeoption" id="radLatConstantOption" value="Constant" checked > 
					{% else %}
						<input type="radio" name="latitudeoption" id="radLatConstantOption" value="Constant" > {
					{% endif %}		
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />			
					{% if data.latoption == 'Grid' %} 
						<input type="radio" name="latitudeoption" id="radLatGridOption" value="Grid" checked >
					{% else %}
						<input type="radio" name="latitudeoption" id="radLatGridOption" value="Grid" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_latitude %}
						<div id="lat_constant">
				    		{{ form.input('latitude', label = _('Site latitude value'), type='text', value=data.latitude,
				    		id='field-latitude', placeholder= _('0'), error=errors.latitude,
				    		classes=['control-medium'])}}
				    	</div>
				    {% endblock %}
				    <div id="lat_gridfile"> 
						{% block form_field_select_latitude_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('latitudegridfile', id='field-latitudegridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.latitudegridfile, error=errors.latitudegridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_latitude_grid_file_format %}
				    		{{ form.input('latitudegridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.latitudegridfileformat,
				    		id='field-latitudegridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.latitudegridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				
				{% block form_fields_set_site_longitude_options %}
					<label >Site longitude options</label>
					{% if data.lonoption == 'Compute' or not data.lonoption %} 
		    			<input type="radio" name="longitudeoption" id="radLonComputeOption" value="Compute" checked > 
		    		{% else %}
		    			<input type="radio" name="longitudeoption" id="radLonComputeOption" value="Compute"  > 
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Derive from projection information') }}</span> 
		    		<br />
		    		{% if data.lonoption == 'Constant' %} 
						<input type="radio" name="longitudeoption" id="radLonConstantOption" value="Constant" checked > 
					{% else %}
						<input type="radio" name="longitudeoption" id="radLonConstantOption" value="Constant"  > 
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.lonoption == 'Grid' %} 
						<input type="radio" name="longitudeoption" id="radLonGridOption" value="Grid" checked > 
					{% else %}
						<input type="radio" name="longitudeoption" id="radLonGridOption" value="Grid" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_longitude %}
						<div id="lon_constant">
				    		{{ form.input('longitude', label = _('Site longitude value'), type='text', value=data.longitude,
				    		id='field-longitude', placeholder= _('0'), error=errors.longitude,
				    		classes=['control-medium'])}}
				    	</div>
				    {% endblock %} 
				    <div id="lon_gridfile">
						{% block form_field_select_longitude_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('longitudegridfile', id='field-longitudegridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.longitudegridfile, error=errors.longitudegridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_usic_longitude_grid_file_format %}
				    		{{ form.input('longitudegridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.latitudegridfileformat,
				    		id='field-longitudegridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.longitudegridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}			
			{% endif %}
			
			{# Site Initial Conditions: Monthly Mean Diurnal Temperature Range #}
	        {% if c.form_stage == 'stage_7' %}
	        	{% block ueb_pkg_site_initial_conditions_mean_diurnal_temp_heading %}
		    		<h4>{{ _('Step-7:Site Initial Conditions-Monthly Mean Diurnal Temperature Range') }}</h4>
		    	{% endblock %}
	        	{% set months = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'] %}
	        	{% set month_labels = {'january': 'January', 'february': 'February', 'march': 'March', 'april': 'April', 'may': 'May', 'june':'June', 'july':'July', 'august':'August', 'september':'September', 'october': 'October', 'november':'November', 'december':'December'} %}
	        	{% for month in months %}
	        		{% set block_name = "form_field_" + month %}
	        		{% set field_id = "field-" + month %}	 
	        		{% set field_label = month_labels[month] %}       		
	        		{% if month == 'january' %}
	        			{% set dataValue = data.january %}
	        			{% set errorValue = errors.january %}
	        		{% elif month == 'february' %}
	        			{% set dataValue = data.february %}
	        			{% set errorValue = errors.february %}
	        		{% elif month == 'march' %}
	        			{% set dataValue = data.march %}
	        			{% set errorValue = errors.march %}
	        		{% elif month == 'april' %}
	        			{% set dataValue = data.april %}
	        			{% set errorValue = errors.april %}
	        		{% elif month == 'may' %}
	        			{% set dataValue = data.may %}
	        			{% set errorValue = errors.may %}
	        		{% elif month == 'june' %}
	        			{% set dataValue = data.june %}
	        			{% set errorValue = errors.june %}
	        		{% elif month == 'july' %}
	        			{% set dataValue = data.july %}
	        			{% set errorValue = errors.july %}
	        		{% elif month == 'august' %}
	        			{% set dataValue = data.august %}
	        			{% set errorValue = errors.august %}
	        		{% elif month == 'september' %}
	        			{% set dataValue = data.september %}
	        			{% set errorValue = errors.september %}
	        		{% elif month == 'october' %}
	        			{% set dataValue = data.october %}
	        			{% set errorValue = errors.october %}	
	        		{% elif month == 'november' %}
	        			{% set dataValue = data.november %}
	        			{% set errorValue = errors.november %}
	        		{% elif month == 'december' %}
	        			{% set dataValue = data.december %}
	        			{% set errorValue = errors.december %}
	        		{% endif %}
		        	{% block block_name scoped %}
			    		{{ form.input( month, label = _(field_label), type='text', value=dataValue,
			    		id=field_id, placeholder= _('0'), error=errorValue,
			    		classes=['control-medium'])}}			    		
					{% endblock %} 
				{% endfor %}
				
				{#
				{% block form_field_feb %}
		    		{{ form.input('february', label = _('February'), type='text', value=data.february,
		    		id='field-february', placeholder= _('0'), error=errors.february,
		    		classes=['control-medium'])}}
				{% endblock %}
				#}
	        {% endif %}
			
			{# Site Initial Conditions: Monthly Mean Diurnal Temperature Range #}
	        {% if c.form_stage == 'stage_8' %}
	        	{% block ueb_pkg_time_series_variables_heading %}
		    		<h4>{{ _('Step-8:Time Series Variables') }}</h4>
		    	{% endblock %}
	        	{% block form_field_time_series_datasource %}
					{{ form.select('timeseriesdatasource', label=_('Select time series data source'), options=[{'value':'Daymet time series'}], selected='Daymet time series', error=errors.timeseriesdatasource, classes=['control-medium'])}}
				{% endblock %}
				{% block form_fields_set_temperature_options %}
					<label >Temperature options</label>
					{% if data.tempoption == 'Compute' or not data.tempoption %} 
		    			<input type="radio" name="taoption" id="radTempComputeOption" value="Compute" checked >
		    		{% else %}
		    			<input type="radio" name="taoption" id="radTempComputeOption" value="Compute" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use selected data source') }}</span> 
		    		<br />
		    		{% if data.tempoption == 'Constant' %} 
						<input type="radio" name="taoption" id="radTempConstantOption" value="Constant" checked >
					{% else %}
						<input type="radio" name="taoption" id="radTempConstantOption" value="Constant" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.tempoption == 'Text' %} 
						<input type="radio" name="taoption" id="radTempTextOption" value="Text" checked>
					{% else %}
						<input type="radio" name="taoption" id="radTempTextOption" value="Text" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected text file') }}</span> 
					<br />
					{% if data.tempoption == 'Grid' %} 
						<input type="radio" name="taoption" id="radTempGridOption" value="Grid" checked >	
					{% else %}
						<input type="radio" name="taoption" id="radTempGridOption" value="Grid">
					{% endif %}	
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />			
					{% block form_field_temperarture %}
						<div id="temp_constant">									    		
				    		{{ form.input('ta', label = _('Temperature value'), type='text', value=data.ta,
				    		id='field-ta', placeholder= _('0'), error=errors.ta,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    {% block form_field_select_temp_text_file %}
				    	<div id="temp_textfile">				    						    				    		
			    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
			    				{% call form.input('tatextfile', id='field-tatextfile', label=_('Select a text file'), placeholder=_(''), value=data.tatextfile, error=errors.tatextfile, classes=['control-medium'], attrs=format_attrs) %}
				    				
			    				{% endcall %}
	    				</div>
	    			{% endblock %}
	    			<div id="temp_gridfile">	    				   				
						{% block form_field_select_temp_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('tagridfile', id='field-tempgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.tagridfile, error=errors.tagridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_temp_grid_file_format %}
				    		{{ form.input('tagridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.tagridfileformat,
				    		id='field-tagridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.tagridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				<br />				
				{% block form_fields_set_precipitation_options %}
					<label>Precipitation options</label>
					{% if data.precoption == 'Compute' or not data.precoption %} 
		    			<input type="radio" name="precoption" id="radPrecComputeOption" value="Compute" checked >
		    		{% else %}
		    			<input type="radio" name="precoption" id="radPrecComputeOption" value="Compute" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use selected data source') }}</span> 
		    		<br />
		    		{% if data.precoption == 'Constant' %} 
						<input type="radio" name="precoption" id="radPrecConstantOption" value="Constant" checked >
					{% else %}
						<input type="radio" name="precoption" id="radPrecConstantOption" value="Constant" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.precoption == 'Text' %} 
						<input type="radio" name="precoption" id="radPrecTextOption" value="Text" checked >
					{% else %}
						<input type="radio" name="precoption" id="radPrecTextOption" value="Text" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected text file') }}</span> 
					<br />
					{% if data.precoption == 'Grid' %} 
						<input type="radio" name="precoption" id="radPrecGridOption" value="Grid" checked >
					{% else %}
						<input type="radio" name="precoption" id="radPrecGridOption" value="Grid" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_precipitation %}
						<div id="prec_constant">							
				    		{{ form.input('prec', label = _('Precipitation value (specify unit here)'), type='text', value=data.prec,
				    		id='field-prec', placeholder= _('0'), error=errors.prec,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    {% block form_field_select_prec_text_file %}
					    <div id="prec_textfile">					    					    		
			    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
			    				{% call form.input('prectextfile', id='field-prectextfile', label=_('Select a text file'), placeholder=_(''), value=data.prectextfile, error=errors.prectextfile, classes=['control-medium'], attrs=format_attrs) %}
				    				
			    				{% endcall %}
		    			</div>
	    			{% endblock %}
	    			<div id="prec_gridfile">	    				
						{% block form_field_select_prec_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('precgridfile', id='field-precgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.precgridfile, error=errors.precgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_prec_grid_file_format %}
				    		{{ form.input('precgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.precgridfileformat,
				    		id='field-precgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.precgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}			 
				<br />
				{% block form_fields_set_wind_speed_options %}
					<label >Wind speed options</label>
					{% if data.windoption == 'Compute' or not data.windoption %} 
		    			<input type="radio" name="voption" id="radWindComputeOption" value="Compute" checked >
		    		{% else %}
		    			<input type="radio" name="voption" id="radWindComputeOption" value="Compute" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use selected data source') }}</span> 
		    		<br />
		    		{% if data.windoption == 'Constant' %} 
						<input type="radio" name="voption" id="radWindConstantOption" value="Constant" checked >
					{% else %}
						<input type="radio" name="voption" id="radWindConstantOption" value="Constant" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.windoption == 'Text' %} 
						<input type="radio" name="voption" id="radWindTextOption" value="Text" checked >
					{% else %}
						<input type="radio" name="voption" id="radWindTextOption" value="Text">
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected text file') }}</span> 
					<br />
					{% if data.windoption == 'Grid' %} 
						<input type="radio" name="voption" id="radWindGridOption" value="Grid" checked >
					{% else %}
						<input type="radio" name="voption" id="radWindGridOption" value="Grid">
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_wind_speed %}
						<div id="wind_constant">							
				    		{{ form.input('v', label = _('Wind speed value (specify unit here)'), type='text', value=data.v,
				    		id='field-v', placeholder= _('0'), error=errors.v,
				    		classes=['control-medium'])}}
				    	</div>
				    {% endblock %} 
				    {% block form_field_select_wind_text_file %}	
					    <div id="wind_textfile">					    					    		
			    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
			    				{% call form.input('vtextfile', id='field-vtextfile', label=_('Select a text file'), placeholder=_(''), value=data.vtextfile, error=errors.vtextfile, classes=['control-medium'], attrs=format_attrs) %}
				    				
			    				{% endcall %}
	    				</div>
	    			{% endblock %}
	    			<div id="wind_gridfile">	    				
						{% block form_field_select_wind_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('vgridfile', id='field-vgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.vgridfile, error=errors.vgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_wind_grid_file_format %}
				    		{{ form.input('vgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.vgridfileformat,
				    		id='field-vgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.vgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				<br />
				{% block form_fields_set_rh_options %}
					<label >Relative humidity options</label>
					{% if data.rhoption == 'Compute' or not data.rhoption %} 
		    			<input type="radio" name="rhoption" id="radRhComputeOption"  value="Compute" checked >
		    		{% else %}
		    			<input type="radio" name="rhoption" id="radRhComputeOption"  value="Compute" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use selected data source') }}</span> 
		    		<br />
		    		{% if data.rhoption == 'Constant' %} 
						<input type="radio" name="rhoption" id="radRhConstantOption" value="Constant" checked >
					{% else %}
						<input type="radio" name="rhoption" id="radRhConstantOption" value="Constant">
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.rhoption == 'Text' %} 
						<input type="radio" name="rhoption" id="radRhTextOption" value="Text" checked >
					{% else %}
						<input type="radio" name="rhoption" id="radRhTextOption" value="Text" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected text file') }}</span> 
					<br />
					{% if data.rhoption == 'Grid' %} 
						<input type="radio" name="rhoption" id="radRhGridOption" value="Grid" checked >
					{% else %}
						<input type="radio" name="rhoption" id="radRhGridOption" value="Grid" >
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_rh %}
						<div id="rh_constant">							
				    		{{ form.input('rh', label = _('Relative humidity value (decimal value)'), type='text', value=data.rh,
				    		id='field-rh', placeholder= _('0'), error=errors.rh,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    {% block form_field_select_rh_text_file %}	
					    <div id="rh_textfile">					    		    		
			    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
			    				{% call form.input('rhtextfile', id='field-rhtextfile', label=_('Select a text file'), placeholder=_(''), value=data.rhtextfile, error=errors.rhtextfile, classes=['control-medium'], attrs=format_attrs) %}
				    				
			    				{% endcall %}
	    				</div>
	    			{% endblock %}
	    			<div id="rh_gridfile">	    				
						{% block form_field_select_rh_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('rhgridfile', id='field-rhgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.rhgridfile, error=errors.rhgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_rh_grid_file_format %}
				    		{{ form.input('rhgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.rhgridfileformat,
				    		id='field-rhgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.rhgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
				<br />
				{% block form_fields_set_snow_albedo_options %}
					<label >Snow albedo options</label>
					{% if data.snowalboption == 'Compute' or not data.snowalboption %} 
		    			<input type="radio" name="snowalboption" id="radSnowalbComputeOption"  value="Compute" checked >
		    		{% else %}
		    			<input type="radio" name="snowalboption" id="radSnowalbComputeOption"  value="Compute" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use selected data source') }}</span> 
		    		<br />
		    		{% if data.snowalboption == 'Constant' %} 
						<input type="radio" name="snowalboption" id="radSnowalbConstantOption" value="Constant" checked >
					{% else %}
						<input type="radio" name="snowalboption" id="radSnowalbConstantOption" value="Constant">
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
					<br />
					{% if data.snowalboption == 'Text' %} 
						<input type="radio" name="snowalboption" id="radSnowalbTextOption" value="Text" checked >
					{% else %}
						<input type="radio" name="snowalboption" id="radSnowalbTextOption" value="Text">
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected text file') }}</span> 
					<br />
					{% if data.snowalboption == 'Grid' %} 
						<input type="radio" name="snowalboption" id="radSnowalbGridOption" value="Grid" checked >
					{% else %}
						<input type="radio" name="snowalboption" id="radSnowalbGridOption" value="Grid">
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_snowalb %}
						<div id="snowalb_constant">							
				    		{{ form.input('snowalb', label = _('Snow albedo value'), type='text', value=data.snowalb,
				    		id='field-snowalb', placeholder= _('0'), error=errors.snowalb,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    {% block form_field_select_snowalb_text_file %}	
					    <div id="snowalb_textfile">					    		    		
			    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
			    				{% call form.input('snowalbtextfile', id='field-snowalbtextfile', label=_('Select a text file'), placeholder=_(''), value=data.snowalbtextfile, error=errors.snowalbtextfile, classes=['control-medium'], attrs=format_attrs) %}
				    				
			    				{% endcall %}
	    				</div>
	    			{% endblock %}
	    			<div id="snowalb_gridfile">
	    				{% block form_field_select_snowalb_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('snowalbgridfile', id='field-snowalbgridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.snowalbgridfile, error=errors.snowalbgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_snowalb_grid_file_format %}
				    		{{ form.input('snowalbgridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.snowalbgridfileformat,
				    		id='field-snowalbgridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.snowalbgridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}
				<br />
				{% block form_fields_set_ground_heat_flux_options %}
					<label>Ground heat flux options</label>
					{% if data.qgoption == 'Constant' or not data.qgoption %} 
		    			<input type="radio" name="qgoption" id="radQgConstantOption" value="Constant" checked >
		    		{% else %}
		    			<input type="radio" name="qgoption" id="radQgConstantOption" value="Constant" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Use a constant value') }}</span> 
		    		<br />
		    		{% if data.qgoption == 'Text' %} 
						<input type="radio" name="qgoption" id="radQgTextOption" value="Text" checked >
					{% else %}
						<input type="radio" name="qgoption" id="radQgTextOption" value="Text">
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected text file') }}</span> 
					<br />
					{% if data.qgoption == 'Grid' %} 
						<input type="radio" name="qgoption" id="radQgGridOption" value="Grid" checked >
					{% else %}
						<input type="radio" name="qgoption" id="radQgGridOption" value="Grid">
					{% endif %}
					<span class="ueb-radio inline">{{ _('Use selected grid file') }}</span> 
					<br />
					{% block form_field_gq %}
						<div id="qg_constant">							
				    		{{ form.input('qg', label = _('Ground heat flux value (kJ/m2/hr)'), type='text', value=data.qg,
				    		id='field-qg', placeholder= _('0'), error=errors.gq,
				    		classes=['control-medium'])}}
			    		</div>
				    {% endblock %} 
				    {% block form_field_select_qg_text_file %}	
					    <div id="qg_textfile">					    			    		
			    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
			    				{% call form.input('qgtextfile', id='field-qgtextfile', label=_('Select a text file'), placeholder=_(''), value=data.gqtextfile, error=errors.gqtextfile, classes=['control-medium'], attrs=format_attrs) %}
				    				
			    				{% endcall %}
	    				</div>
	    			{% endblock %}
	    			<div id="qg_gridfile">	    				
						{% block form_field_select_gq_grid_file %}				    		
		    			{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    				{% call form.input('qggridfile', id='field-qggridfile', label=_('Select a grid file(2D NetCDF)'), placeholder=_(''), value=data.qggridfile, error=errors.qgridfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    				{% endcall %}
		    			{% endblock %}
		    			{% block form_field_qg_grid_file_format %}
				    		{{ form.input('qggridfileformat', label = _('NetCDF data dimension and variable details'), type='text', value=data.qggridfileformat,
				    		id='field-qggridfileformat', placeholder= _('X:name of x-coordinate;Y:name of y-coordinate;D:name of data variable'), error=errors.qggridfileformat,
				    		classes=['control-medium'])}}
					    {% endblock %} 
				    </div>
				{% endblock %}	
	        {% endif %}
	        
	        {# Output Variables #}
	        {% if c.form_stage == 'stage_9' %}
	        	{% block ueb_pkg_output_variables_heading %}
		    		<h4>{{ _('Step-9:Output Variables') }}</h4>
		    	{% endblock %}
	        	{% block form_fields_set_output_control_file_options %}
					<label >Use default output control file</label>
					{% if data.outputControlFileOption == 'Yes' or not data.outputControlFileOption %} 
		    			<input type="radio" name="outputControlFileOption" id="radDefaultOutputControlFileYes" value="Yes" checked >		    			
		    		{% else %}
		    			<input type="radio" name="outputControlFileOption" id="radDefaultOutputControlFileYes" value="Yes" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Yes') }}</span> 
		    		<br />
		    		
		    		{% if data.outputControlFileOption == 'No' %} 
						<input type="radio" name="outputControlFileOption" id="radDefaultOutputControlFileNo"  value="No" checked >
					{% else %}
						<input type="radio" name="outputControlFileOption" id="radDefaultOutputControlFileNo"  value="No">
					{% endif %}
					<span class="ueb-radio inline">{{ _('No') }}</span> 
					
					{% block form_field_select_output_control_text_file %}
						<div id="output_controlfile">	
					    	<br />			    				    		
		    				{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    					{% call form.input('outputControlFile', id='field-outputcontrolfile', label=_('Select a text file'), placeholder=_(''), value=data.outputcontrolfile, error=errors.outputcontrolfile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    					{% endcall %}
		    			</div>		    				
	    			{% endblock %}
	    		{% endblock %}
	    		<br />
	    		{% block form_fields_set_aggregated_output_control_file_options %}
					<label>Use default aggregated output control file</label>
					{% if data.aggrOutputControlFileOption == 'Yes' or not data.aggrOutputControlFileOption %} 
		    			<input type="radio" name="aggrOutputControlFileOption" id="radDefaultAggrOutputControlFileYes" value="Yes" checked >
		    		{% else %}
		    			<input type="radio" name="aggrOutputControlFileOption" id="radDefaultAggrOutputControlFileYes" value="Yes" >
		    		{% endif %}
		    		<span class="ueb-radio inline">{{ _('Yes') }}</span> 
		    		<br />
		    		
		    		{% if data.aggrOutputControlFileOption == 'No' %} 
						<input type="radio" name="aggrOutputControlFileOption" id="radDefaultAggrOutputControlFileNo" value="No" checked >
					{% else %}
						<input type="radio" name="aggrOutputControlFileOption" id="radDefaultAggrOutputControlFileNo" value="No">
					{% endif %}
					<span class="ueb-radio inline">{{ _('No') }}</span> 
					<br />
					{% block form_field_select_aggregated_output_control_text_file %}
						<div id="aggroutput_controlfile">	
					    	<br />					    		
		    				{% set format_attrs={'data-module': 'autocomplete', 'data-module-source': '/api/2/util/resource/format_autocomplete?incomplete=?'} %}
		    					{% call form.input('aggrOutputControlFile', id='field-aggroutputcontrolfile', label=_('Select a text file'), placeholder=_(''), value=data.aggrOutputControlFile, error=errors.aggrOutputControlFile, classes=['control-medium'], attrs=format_attrs) %}
			    				
		    					{% endcall %}
		    				</div>
	    			{% endblock %}
	    		{% endblock %}
	        {% endif %}	
	        
	        {# submission confirmation #}
	        {% if c.form_stage == 'stage_confirm' %}
	        	{#
	        	<div>
	        		{{ c.selected_data }}
	        	</div>	
	        	#}
	        	{% set count = 1 %}
	        	{% for section in c.ueb_input_sections %}
	        		<fieldset>
		    			<legend>{{ section }}</legend>   
		        	    {% set edit_btn_name = 'edit_%d' % count %} 		
	        			{% set data_items = c.ueb_input_section_data_items[section] %}
	        			{% for key in data_items['order'] %}
	        				{{ key + '%s' % data_items[key] }} <br />
	        			{% endfor %}
	        			<div align="right">	        				
	        				<button class="btn btn-primary" name= "{{ edit_btn_name }}" value="Edit" type="submit">{{ _('Edit') }}</button>	
	        			</div>	        			
	        			{% set count = count + 1 %}
	        		</fieldset>	        		
	        	{% endfor %}        
	        {% endif %}
	          
	        <br />     
	        {% block form_buttons %}
	        	<p>
	        	{% if c.form_stage == 'stage_confirm' %}
	        		<button class="btn btn-primary" name="confirm" value="Confirm" type="submit">{{ _('Confirm') }}</button>	        		
	        	{% endif %}
	        	{% if c.form_stage != 'stage_confirm' %}
		        	<button class="btn btn-primary" name="submit" value="Submit" type="submit">{{ _('Submit') }}</button>
		        	{% if c.form_stage != 'stage_1' %}
	      				<button class="btn" name="prev" value="Previous" type="submit">{{ _('Prev') }}</button>
	      			{% endif %}
	      			      			
	      			{% if c.form_stage != 'stage_9' %}
	      				<button class="btn" name="next" value="Next" type="submit">{{ _('Next') }}</button>     
	      			{% endif %}	
	      		{% endif %}	
      			</p>
    		{% endblock %}
	    </form>
     </div>
  </section>
{% endblock %}